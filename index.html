<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>QRコードリーダー</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>

  <h1>QRコードリーダー</h1>
  <div id="reader"></div>
  <div id="result">ここに読み取った内容が出ます</div>

<script>
  // QRコード読み取りに成功したときの処理
  function onScanSuccess(decodedText, decodedResult) {
    console.log("読み取り成功！内容:", decodedText);

    // ✅ ここがジャンプ処理！★この中に書くよ！
    if (decodedText.startsWith("http://") || decodedText.startsWith("https://")) {
      window.location.href = decodedText;
      setTimeout(() => html5QrcodeScanner.clear(), 500); // ← ここがジャンプ後の停止処理
    } else {
      document.getElementById('result').innerText = "読み取り成功: " + decodedText;
      html5QrcodeScanner.clear(); // ← URLでないときはすぐ止める
    }
  }

  // QRコードスキャナーの初期化と実行
  const html5QrcodeScanner = new Html5QrcodeScanner("reader", {
    fps: 10,
    qrbox: 250
  });
  html5QrcodeScanner.render(onScanSuccess);
</script>


</body>
</html>

