<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>QRコードリーダー</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
</head>
<body>

  <h1>QRコードリーダー</h1>
  <div id="reader"></div>
  <div id="result">ここに読み取った内容が出ます</div>

  <script>
    // ✅ QRコード読み取り後の処理
    function onScanSuccess(decodedText, decodedResult) {
      // ✅ 読み取った内容がURLだったらジャンプ！
      if (decodedText.startsWith("http://") || decodedText.startsWith("https://")) {
        window.location.href = decodedText; // ← ここでジャンプ！
      } else {
        // URLじゃない場合は画面に表示
        document.getElementById('result').innerText = "読み取り成功: " + decodedText;
      }

      html5QrcodeScanner.clear(); // 一度読んだらスキャン停止
    }

    // ✅ QRコード読み取り機能の設定
    const html5QrcodeScanner = new Html5QrcodeScanner("reader", {
      fps: 10,
      qrbox: 250
    });

    html5QrcodeScanner.render(onScanSuccess); // 実行
  </script>

</body>
</html>

